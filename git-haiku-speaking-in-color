#!/bin/bash
# Generated by Port 42 - 2025-07-19 04:01:18
# Transforms git commit messages into colorful poetic haikus

#!/usr/bin/env bash

if ! git rev-parse --is-inside-work-tree > /dev/null 2>&1; then
  echo "Error: Not a git repository"
  exit 1
fi

LIMIT=${1:-5}

git log --oneline -n $LIMIT | while read commit; do
  hash=${commit:0:7}
  msg=${commit:8}

  # Split commit message into haiku lines
  line1=$(echo $msg | cut -d' ' -f1-5)
  line2=$(echo $msg | cut -d' ' -f6-12)
  line3=$(echo $msg | cut -d' ' -f13-17)

  # Print colorful haiku
  printf "\e[1;36m%s\e[0m\n" "$hash"
  printf "\e[1;35m%s\e[0m\n" "$line1"
  printf "\e[1;34m%s\e[0m\n" "$line2"
  printf "\e[1;35m%s\e[0m\n\n" "$line3"
  
  # Dramatic pause for effect
  sleep 1
done | lolcat -F 0.5
